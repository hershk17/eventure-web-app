<ion-header>
  <ion-toolbar>
    <ion-title>Create Event</ion-title>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="eventForm" (ngSubmit)="onCreateEvent()">
    <ion-card style="border-radius: 10px">
      <ion-card-header>
        <ion-list>
          <ion-item lines="full">
            <ion-label position="floating">Event Name</ion-label>
            <ion-input
              autocapitalize
              type="text"
              formControlName="eventName"
              inputmode="text"
              required
            ></ion-input>
          </ion-item>
          <div *ngFor="let error of errorMessages.eventName">
            <ng-container
              *ngIf="eventName?.hasError(error.type) && (eventName.dirty || eventName.touched)"
            >
              <small class="error-message">{{error.message}}</small>
            </ng-container>
          </div>

          <ion-item lines="full">
            <ion-label position="floating">Event Description</ion-label>
            <ion-input
              autocapitalize
              type="text"
              formControlName="eventDescription"
              placeholder="Write something about this event..."
              inputmode="text"
              required
            ></ion-input>
          </ion-item>
          <div *ngFor="let error of errorMessages.eventDescription">
            <ng-container
              *ngIf="eventDescription?.hasError(error.type) && (eventDescription.dirty || eventDescription.touched)"
            >
              <small class="error-message">{{error.message}}</small>
            </ng-container>
          </div>

          <ion-item lines="full">
            <ion-label position="floating">Location</ion-label>
            <ion-input
              autocapitalize
              type="text"
              formControlName="eventLocation"
              inputmode="text"
              required
            ></ion-input>
          </ion-item>
          <div *ngFor="let error of errorMessages.eventLocation">
            <ng-container
              *ngIf="eventLocation?.hasError(error.type) && (eventLocation.dirty || eventLocation.touched)"
            >
              <small class="error-message">{{error.message}}</small>
            </ng-container>
          </div>

          <ion-row>
            <ion-col>
              <ion-item lines="full">
                <ion-label position="floating">Start Date </ion-label>
                <ion-datetime
                  formControlName="startDate"
                  presentation="date-time"
                  [min]="minDate"
                  [max]="maxDate"
                  position="floating"
                ></ion-datetime>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item lines="full">
                <ion-label position="floating">Start Time </ion-label>
                <ion-datetime
                  formControlName="startTime"
                  position="floating"
                  display-format="h:mm A"
                  picker-format="h:mm A"
                ></ion-datetime>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-item>
            <ion-label position="floating">Event Privacy</ion-label>
            <ion-select interface="popover" value="privacy">
              <ion-select-option value="public">Public</ion-select-option>
              <ion-select-option value="followers"
                >Followers Only</ion-select-option
              >
              <ion-select-option value="invite"
                >Invite Only</ion-select-option
              >
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Category</ion-label>
            <ion-select formControlName="category" multiple="true">
              <ion-select-option
                *ngFor="let category of this.categories"
                [value]="category"
                >{{category}}</ion-select-option
              >
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Max Participants</ion-label>
            <ion-input
              type="number"
              formControlName="eventParticipantCnt"
              inputmode="number"
              value="5"
              required
            ></ion-input>
          </ion-item>
        </ion-list>
      </ion-card-header>
      <ion-card-content>
        <ion-button
          type="submit"
          color="primary"
          expand="block"
          [disabled]="!eventForm.valid"
          >Create Event</ion-button
        >
        <!-- <ion-button [routerLink]="['/login']" color="light" expand="block"
          >Back to Login</ion-button
        > -->
      </ion-card-content>
    </ion-card>
  </form>
</ion-content>
